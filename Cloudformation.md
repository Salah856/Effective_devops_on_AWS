# AWS CloudFormation designer

AWS CloudFormation designer is a tool that lets you create and edit CloudFormation templates using a graphic user interface. 

Designer hides a lot of the complexity of editing a CloudFormation template using a standard text editor. You can access it directly at https://console.aws.amazon.com/cloudformation/designer or in the CloudFormation dashboard after you click on Create Stack:

![image](https://user-images.githubusercontent.com/23625821/130321274-82fb3804-ef94-4358-88b2-85f4f36b7fcb.png)

The workflow is fairly simple. You simply drag and drop resources from the left-hand side menu into a canvas. Once your resources are added, you can then connect them to other resources using the small dots surrounding each resource icon. In the preceding example, we are connecting an EC2 instance to its security group. There are a number of hidden gems that can help you when designing your template.

You can use right-click on resources and directly access the documentation for the CloudFormation resource, as follows:

![image](https://user-images.githubusercontent.com/23625821/130321499-c1fa3fd8-988a-43dd-9a98-ade50393cd33.png)

When dragging a dot to connect two resources together, designer will highlight resources compatible with that connection:

![image](https://user-images.githubusercontent.com/23625821/130321520-60f58b8d-02c4-4604-805a-fe86c025b10e.png)

The editor on the bottom section of the designer supports auto completion using Ctrl + space:

![image](https://user-images.githubusercontent.com/23625821/130321537-467a0be7-6142-49c0-b101-e705c6cb091c.png)

Once your template is complete, you can simply click on a button and go from designing your stack to launching it.

## Cloudformer

CloudFormer is a tool that lets you create CloudFormation templates looking at pre-existing resources. If you have a set of resources that you have already created on an ad-hoc basis like we have done so far in the book, you can use CloudFormer to group them under a new CloudFormation template. You can then later customize the template that CloudFormer generates using a text editor or even CloudFormation designer and make it fit your needs.

Unlike most AWS tools and services, CloudFormer isn't completely managed by AWS; it's a self-hosted tool that you can instantiate on demand using CloudFormation. To do so, follow the given steps:

1. Open https://console.aws.amazon.com/cloudformation in your browser.
2. Select the AWS region where the resources you are trying to templatize are.
3. In the Select a sample template drop-down menu, choose CloudFormer and click on Next
4. On that screen, at the top, you can provide a stack name (feel free to keep the default name AWSCloudFormer ) and in the bottom part, you are asked to provide two extra parameters, a username, and a password. Those will be used later to log in to CloudFormer. Pick a username and a password, and click on Next.
5. On the next screen, you can provide extra tags and more advanced options, but we will simply continue by clicking on Next.

6. This brings us to the review page where we will check the checkbox to acknowledge that this will cause AWS CloudFormation to create IAM resources. Click on Create.
7. This will bring us back on the main screen of the CloudFormation console where we can see our AWS CloudFormer stack being created. Once the Status goes from CREATE_IN_PROGRESS to CREATE_COMPLETE, select it and click on the Output tab at the bottom. At that point, you have created the resources needed to use CloudFomer. 
8. In order to create a stack with it, do the following:
 In the Outputs tab (which illustrates the outputs section of CloudFormation), click on the website URL link. This will open up the CloudFormer tool. Log in using the username and password provided in the fourth step of the previous set of instructions. The following screen will appear:
 
 ![image](https://user-images.githubusercontent.com/23625821/130345475-f37792b0-0e4f-4922-9bad-c8241294ec4c.png)

8. Follow the workflow proposed by the tool to select the different resources you want for your CloudFormation template as far as the last step.
9. In the end, you will be able to download the generated template or save it directly in S3.

The CloudFormation template generated by CloudFormer will usually need a bit of editing as you will often want to create a more flexible stack with input parameters and an outputs section.

## Recreating our helloworld example with CloudFormation

Designer and CloudFormer are two very useful tools when you are in the process of architecting your infrastructure and are trying to add source control to your design. That said, whenever you wear your DevOps hat, it's a different story. Using those tools markedly reduces the added value that CloudFormation provides by using the JSON format. 

If you got a chance to read some of the templates available or tried to use CloudFormer on your existing infrastructure, you probably noticed that raw CloudFormation templates tend to be fairly long and not Don't Repeat Yourself (DRY).

From a DevOps perspective, one of the most powerful aspects of CloudFormation is the ability to write code to dynamically generate those templates. To illustrate that point, we are going to turn to Python and a library called troposphere to generate our Hello World CloudFormation template.

### Using troposphere to create a Python script for our template

We will first install the troposphere library:

```sh
$ pip install troposphere
```


Once the installation is done, you can then create a new file called helloworld-cf- template.py .


We will start our file by importing a number of definitions from the troposphere module:

```py

"""Generating CloudFormation template."""
from troposphere import (
Base64,
ec2,
GetAtt,
Join,
Output,
Parameter,
Ref,
Template,
)

```

